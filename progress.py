# -*- coding: utf-8 -*-
"""
/***************************************************************************
 BioDispersal
                                 A QGIS plugin
 Computes ecological continuities based on environments permeability
 Generated by Plugin Builder: http://g-sherman.github.io/Qgis-Plugin-Builder/
                             -------------------
        begin                : 2018-04-12
        git sha              : $Format:%H$
        copyright            : (C) 2018 by IRSTEA
        email                : mathieu.chailloux@irstea.fr
 ***************************************************************************/

/***************************************************************************
 *                                                                         *
 *   This program is free software; you can redistribute it and/or modify  *
 *   it under the terms of the GNU General Public License as published by  *
 *   the Free Software Foundation; either version 2 of the License, or     *
 *   (at your option) any later version.                                   *
 *                                                                         *
 ***************************************************************************/
"""

import utils
import qgsUtils
import params

from PyQt5.QtCore import QObject, pyqtSlot, pyqtSignal

progressConnector = None

@pyqtSlot(int)
def catchProgress(n):
    utils.debug("Setting progress bar value to '" + str(n) + "'")
    progressConnector.dlg.progressBar.setValue(n)

class ProgressConnector(QObject):

    progressSignal = pyqtSignal('int')
    progressEnd = pyqtSignal()

    def __init__(self,dlg):
        self.dlg = dlg
        super(ProgressConnector,self).__init__()
        
    def initGui(self):
        pass
        
    @pyqtSlot(int)
    def catchProgressVal(self,val):
        self.dlg.progressBar.setValue(val)
        
    def connectComponents(self):
        self.progressSignal.connect(catchProgress)
        #qgsUtils.progressBarValueChanged.connect(catchClassRemoved)